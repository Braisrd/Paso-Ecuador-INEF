import{r as a,j as e,L as K}from"./index-oxpajPOj.js";import{c as j,o as F,q as V,h as G,e as D,M as R,C as Q,a as c,d as w,g as B,u as $,f as W,s as X,b as U}from"./firebase-Cfumaa3b.js";const Y=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Z=j("circle-plus",Y);const ee=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],te=j("crown",ee);const se=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],ae=j("house",se);const re=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],le=j("medal",re);const oe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ne=j("search",oe);const ie=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ce=j("trending-up",ie);const de=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],P=j("trophy",de),xe=({player:v,rank:n,onClick:i})=>e.jsxs("div",{onClick:i,className:`relative overflow-hidden rounded-2xl p-4 transition-all duration-300 cursor-pointer transform hover:-translate-y-1 hover:shadow-xl ${n===1?"bg-gradient-to-br from-yellow-500/20 to-yellow-600/20 border border-yellow-500/30":n===2?"bg-gradient-to-br from-gray-400/20 to-gray-500/20 border border-gray-400/30":n===3?"bg-gradient-to-br from-orange-700/20 to-orange-800/20 border border-orange-700/30":"bg-[#13131f] border border-white/5 hover:border-white/10"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:e.jsx(P,{className:"w-16 h-16"})}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-black text-lg shadow-lg ${n===1?"bg-gradient-to-br from-yellow-300 to-yellow-600 text-black":n===2?"bg-gradient-to-br from-gray-100 to-gray-400 text-black":n===3?"bg-gradient-to-br from-orange-300 to-orange-600 text-black":"bg-white/5 text-gray-400"}`,children:n<=3?n:e.jsxs("span",{className:"text-sm",children:["#",n]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`font-bold text-lg truncate ${n===1?"text-yellow-400":"text-white"}`,children:v.name}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3"})," ",v.wins||0," Victorias"]})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-black text-white",children:v.points}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-wider",children:"Puntos"})]})]})]}),me=({isOpen:v,onClose:n,players:i,setPlayers:q})=>{const[g,M]=a.useState(""),[h,E]=a.useState(new Date().toISOString().split("T")[0]),[T,k]=a.useState(""),[C,S]=a.useState(""),[_,N]=a.useState(""),[d,f]=a.useState("tournament"),[A,r]=a.useState(""),[z,s]=a.useState(""),p=async t=>{if(t.preventDefault(),!confirm("쮺onfirmar resultados? Esto actualizar치 los puntos."))return;const m=b=>b.split(`
`).map(l=>l.trim()).filter(l=>l),u=m(T),L=m(C),H=m(_),O=[...new Set([...u,...L,...H])];try{const b={};for(let l of O){let o=i.find(I=>I.name.toLowerCase()===l.toLowerCase());o||(o={id:(await U(D(c,"players"),{name:l,points:0,wins:0,history:[]})).id,name:l,points:0,wins:0,history:[]}),b[l]=o}for(let l of u){const o=b[l];await $(w(c,"players",o.id),{points:(o.points||0)+5,wins:(o.wins||0)+1,history:[...o.history||[],{date:h,event:g,result:"1췈 Lugar",change:"+5"}]})}for(let l of L){const o=b[l];await $(w(c,"players",o.id),{points:(o.points||0)+3,history:[...o.history||[],{date:h,event:g,result:"2췈 Lugar",change:"+3"}]})}for(let l of H){if(u.includes(l)||L.includes(l))continue;const o=b[l];await $(w(c,"players",o.id),{points:(o.points||0)+1,history:[...o.history||[],{date:h,event:g,result:"Participaci칩n",change:"+1"}]})}await U(D(c,"local_tournaments"),{name:g,date:h,winner:u[0]||"Desconocido",participants:O.length}),alert("Torneo registrado y puntos actualizados!"),n(),M(""),k(""),S(""),N("")}catch(b){console.error(b),alert("Error: "+b.message)}},y=async()=>{try{const t=w(c,"config","settings"),m=await B(t),u=m.exists()&&m.data().ligaAdminPassword||"Liga2526";if(A!==u)return alert("Contrase침a actual incorrecta");await X(t,{ligaAdminPassword:z},{merge:!0}),alert("Contrase침a actualizada"),r(""),s("")}catch{alert("Error")}},x=async(t,m)=>{const u=i.find(L=>L.id===t);u&&await $(w(c,"players",t),{points:Math.max(0,(u.points||0)+m)})},J=async t=>{confirm("쮼liminar jugador de la base de datos? Irreversible.")&&await W(w(c,"players",t))};return e.jsx(R,{isOpen:v,onClose:n,size:"xl",children:e.jsxs("div",{className:"flex h-[800px]",children:[e.jsxs("div",{className:"w-1/3 border-r border-white/10 p-6 space-y-2",children:[e.jsx("button",{onClick:()=>f("tournament"),className:`w-full text-left p-3 rounded-xl font-bold ${d==="tournament"?"bg-primary text-white":"text-gray-400 hover:bg-white/5"}`,children:"Nuevo Torneo"}),e.jsx("button",{onClick:()=>f("password"),className:`w-full text-left p-3 rounded-xl font-bold ${d==="password"?"bg-primary text-white":"text-gray-400 hover:bg-white/5"}`,children:"Contrase침a"}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-white/10",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-4",children:"Jugadores"}),e.jsx("div",{className:"space-y-1 max-h-[500px] overflow-y-auto",children:i.sort((t,m)=>m.points-t.points).map(t=>e.jsxs("div",{className:"flex justify-between items-center text-xs p-2 hover:bg-white/5 rounded",children:[e.jsx("span",{className:"text-gray-300",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-white",children:t.points}),e.jsx("button",{onClick:()=>x(t.id,1),className:"text-green-400 hover:text-green-300",children:"+"}),e.jsx("button",{onClick:()=>x(t.id,-1),className:"text-yellow-400 hover:text-yellow-300",children:"-"}),e.jsx("button",{onClick:()=>J(t.id),className:"text-red-400 hover:text-red-300",children:"x"})]})]},t.id))})]})]}),e.jsx("div",{className:"flex-1 p-8 overflow-y-auto",children:d==="password"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Cambiar Contrase침a Admin"}),e.jsx("input",{type:"password",placeholder:"Contrase침a Actual",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3",value:A,onChange:t=>r(t.target.value)}),e.jsx("input",{type:"password",placeholder:"Nueva Contrase침a",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3",value:z,onChange:t=>s(t.target.value)}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-secondary/20 text-secondary rounded-lg font-bold",children:"Actualizar"})]}):e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Z,{className:"text-secondary"})," Nuevo Torneo"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white",placeholder:"Ej: Torneo FIFA",value:g,onChange:t=>M(t.target.value),required:!0}),e.jsx("input",{type:"date",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white",value:h,onChange:t=>E(t.target.value)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase font-bold text-yellow-500 mb-2 block",children:"游볞 1췈 Puesto (+5 pts)"}),e.jsx("textarea",{className:"w-full h-24 bg-yellow-900/10 border border-yellow-500/20 rounded-xl p-3 text-white",placeholder:"Nombres (uno por l칤nea)",value:T,onChange:t=>k(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase font-bold text-gray-300 mb-2 block",children:"游볟 2췈 Puesto (+3 pts)"}),e.jsx("textarea",{className:"w-full h-24 bg-white/5 border border-white/10 rounded-xl p-3 text-white",placeholder:"Nombres (uno por l칤nea)",value:C,onChange:t=>S(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs uppercase font-bold text-primary mb-2 block",children:"Participantes (+1 pt)"}),e.jsx("textarea",{className:"w-full h-24 bg-primary/5 border border-primary/20 rounded-xl p-3 text-white",placeholder:"Lista de nombres...",value:_,onChange:t=>N(t.target.value)})]})]}),e.jsx("button",{type:"submit",className:"w-full py-4 bg-gradient-to-r from-primary to-secondary rounded-xl font-bold text-white shadow-lg",children:"Guardar Resultados"})]})})]})})},ue=()=>{const[v,n]=a.useState("public"),[i,q]=a.useState([]),[g,M]=a.useState([]),[h,E]=a.useState(""),[T,k]=a.useState(!1),[C,S]=a.useState(""),[_,N]=a.useState(!1),[d,f]=a.useState(null);a.useEffect(()=>{const s=F(V(D(c,"players"),G("points","desc")),y=>q(y.docs.map(x=>({id:x.id,...x.data()})))),p=F(V(D(c,"local_tournaments"),G("date","desc")),y=>M(y.docs.map(x=>({id:x.id,...x.data()}))));return()=>{s(),p()}},[]);const A=a.useMemo(()=>i.filter(s=>s.name.toLowerCase().includes(h.toLowerCase())),[i,h]),r=a.useMemo(()=>i.slice(0,3),[i]),z=async s=>{s.preventDefault();const p=w(c,"config","settings"),y=await B(p),x=y.exists()&&y.data().ligaAdminPassword||"Liga2526";C===x?(N(!1),k(!0),S("")):alert("Incorrecto")};return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white font-sans selection:bg-pink-500/30",children:[T&&e.jsx(me,{isOpen:!0,onClose:()=>k(!1),players:i,setPlayers:q}),_&&e.jsx(R,{isOpen:!0,onClose:()=>N(!1),size:"sm",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Acceso Admin Liga"}),e.jsxs("form",{onSubmit:z,children:[e.jsx("input",{type:"password",autoFocus:!0,className:"w-full bg-black/40 border border-white/10 rounded-lg p-3 text-center text-white text-xl tracking-widest mb-4",value:C,onChange:s=>S(s.target.value)}),e.jsx("button",{className:"px-6 py-2 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-lg",children:"Entrar"})]})]})}),d&&e.jsx(R,{isOpen:!0,onClose:()=>f(null),children:e.jsxs("div",{className:"p-8 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-secondary/10 pointer-events-none"}),e.jsx("div",{className:"inline-block p-4 rounded-full bg-gradient-to-br from-primary to-secondary mb-4 shadow-xl",children:e.jsx(P,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-3xl font-black mb-2",children:d.name}),e.jsxs("div",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary mb-6",children:[d.points," PTS"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-left",children:[e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[e.jsx("div",{className:"text-gray-400 text-xs uppercase font-bold",children:"Victorias"}),e.jsxs("div",{className:"text-2xl font-bold",children:[d.wins||0," 游끥"]})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[e.jsx("div",{className:"text-gray-400 text-xs uppercase font-bold",children:"Torneos"}),e.jsxs("div",{className:"text-2xl font-bold",children:[d.history?.length||0," 游늰"]})]})]}),e.jsxs("div",{className:"mt-6 text-left",children:[e.jsx("h4",{className:"font-bold text-gray-500 uppercase text-xs mb-3",children:"Historial Reciente"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2",children:(d.history||[]).slice().reverse().map((s,p)=>e.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-2 rounded text-sm",children:[e.jsx("span",{className:"text-gray-300",children:s.event}),e.jsxs("span",{className:`font-bold ${s.change.includes("+5")?"text-yellow-400":s.change.includes("+3")?"text-gray-300":"text-primary"}`,children:[s.change," pts"]})]},p))})]})]})}),e.jsx("nav",{className:"fixed top-0 w-full z-50 bg-[#0a0a0f]/80 backdrop-blur-lg border-b border-white/5",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-20 flex items-center justify-between",children:[e.jsxs(K,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[e.jsx(ae,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-bold text-gray-400",children:"Volver al Paso"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-primary/10 to-secondary/10 rounded-full border border-primary/20",children:[e.jsx(P,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{className:"font-black text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary",children:"LIGA MULTISPORT"})]}),e.jsx("button",{onClick:()=>N(!0),className:"p-2 bg-white/5 rounded-full hover:bg-white/10 text-gray-400",children:e.jsx(le,{className:"w-5 h-5"})})]})}),e.jsxs("main",{className:"pt-28 pb-12 px-4 max-w-7xl mx-auto space-y-12",children:[e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-end mb-16 relative",children:[e.jsx("div",{className:"hidden md:block absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-primary/20 blur-[120px] rounded-full pointer-events-none"}),r[1]&&e.jsxs("div",{className:"order-2 md:order-1 flex flex-col items-center",children:[e.jsxs("div",{className:"relative w-full aspect-square max-w-[200px] mb-4 group cursor-pointer",onClick:()=>f(r[1]),children:[e.jsx("div",{className:"absolute inset-0 bg-gray-400/20 rounded-full blur-xl animate-pulse"}),e.jsx("div",{className:"relative w-full h-full rounded-full border-4 border-gray-400 bg-[#13131f] flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`https://ui-avatars.com/api/?name=${r[1].name}&background=random`,alt:"",className:"w-full h-full object-cover opacity-80"})}),e.jsx("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 bg-gray-400 text-black font-black px-4 py-1 rounded-full text-xl shadow-lg",children:"#2"})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-300 mb-1",children:r[1].name}),e.jsxs("div",{className:"text-gray-400 font-bold",children:[r[1].points," pts"]})]}),r[0]&&e.jsxs("div",{className:"order-1 md:order-2 flex flex-col items-center z-10 transform -translate-y-8",children:[e.jsxs("div",{className:"relative w-full aspect-square max-w-[240px] mb-4 group cursor-pointer",onClick:()=>f(r[0]),children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-400/30 rounded-full blur-2xl animate-pulse"}),e.jsx(te,{className:"absolute -top-12 left-1/2 -translate-x-1/2 w-16 h-16 text-yellow-400 animate-bounce drop-shadow-[0_0_15px_rgba(250,204,21,0.5)]"}),e.jsx("div",{className:"relative w-full h-full rounded-full border-4 border-yellow-400 bg-[#13131f] flex items-center justify-center overflow-hidden ring-4 ring-yellow-400/20",children:e.jsx("img",{src:`https://ui-avatars.com/api/?name=${r[0].name}&background=random`,alt:"",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-black px-6 py-2 rounded-full text-2xl shadow-xl border-4 border-[#0a0a0f]",children:"#1"})]}),e.jsx("h3",{className:"text-4xl font-black text-white mb-2",children:r[0].name}),e.jsxs("div",{className:"text-yellow-400 font-bold text-xl",children:[r[0].points," pts"]})]}),r[2]&&e.jsxs("div",{className:"order-3 flex flex-col items-center",children:[e.jsxs("div",{className:"relative w-full aspect-square max-w-[200px] mb-4 group cursor-pointer",onClick:()=>f(r[2]),children:[e.jsx("div",{className:"absolute inset-0 bg-orange-700/20 rounded-full blur-xl animate-pulse"}),e.jsx("div",{className:"relative w-full h-full rounded-full border-4 border-orange-700 bg-[#13131f] flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`https://ui-avatars.com/api/?name=${r[2].name}&background=random`,alt:"",className:"w-full h-full object-cover opacity-80"})}),e.jsx("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 bg-orange-700 text-white font-black px-4 py-1 rounded-full text-xl shadow-lg",children:"#3"})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-300 mb-1",children:r[2].name}),e.jsxs("div",{className:"text-gray-400 font-bold",children:[r[2].points," pts"]})]})]}),e.jsxs("section",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(ce,{className:"text-primary"})," Ranking General"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Buscar jugador...",className:"bg-white/5 border border-white/10 rounded-full pl-10 pr-4 py-2 text-sm focus:border-primary focus:outline-none w-48 md:w-64",value:h,onChange:s=>E(s.target.value)})]})]}),e.jsx("div",{className:"grid gap-3",children:A.slice(3).map((s,p)=>e.jsx(xe,{player:s,rank:p+4,onClick:()=>f(s)},s.id))})]}),e.jsxs("div",{className:"w-full lg:w-1/3",children:[e.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(Q,{className:"text-secondary"})," 칔ltimos Torneos"]}),e.jsxs("div",{className:"space-y-4",children:[g.map(s=>e.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10 hover:border-white/20 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-bold text-lg",children:s.name}),e.jsx("span",{className:"text-xs text-gray-500 bg-white/5 px-2 py-1 rounded",children:new Date(s.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(P,{className:"w-4 h-4 text-yellow-500"})," Ganador: ",e.jsx("span",{className:"text-white font-bold",children:s.winner})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[s.participants," participantes"]})]},s.id)),g.length===0&&e.jsx("p",{className:"text-gray-500 italic",children:"No hay torneos registrados."})]})]})]})]})]})};export{ue as default};
